(this.webpackJsonpmasktest0330=this.webpackJsonpmasktest0330||[]).push([[0],{31:function(e,a,t){e.exports=t(60)},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){},51:function(e,a,t){},52:function(e,a,t){},53:function(e,a,t){},54:function(e,a,t){},55:function(e,a,t){},56:function(e,a,t){},57:function(e,a,t){},58:function(e,a,t){},60:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),s=t(15),c=t.n(s),r=(t(36),t(6)),i=t(7),l=t(8),m=t(9),d=t(22),u=t(14),p=(t(37),t(38),t(61)),k=t(62),g=t(68),v=t(63),f=t(64),h=t(65),E=function(e){var a=e.getGeolocation,t=e.getAddressToGeolocation,s=e.address,c=e.distance,r=e.getDistanceToUser,i=Object(n.useState)(!1),l=Object(d.a)(i,2),m=l[0],E=l[1],b=function(){E(!m)},y=Object(n.useState)(c),L=Object(d.a)(y,2),_=L[0],w=L[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{className:"navbar fixed-top navbar-light bg-light white"},o.a.createElement("div",{className:"header__title"},o.a.createElement("div",{id:"my-location",className:"header_text",onClick:function(){new window.daum.Postcode({oncomplete:function(e){var a=e.roadAddress;document.getElementById("my-location").innerHTML=a,(new kakao.maps.services.Geocoder).addressSearch(e.roadAddress,(function(e,n){if(n===kakao.maps.services.Status.OK){var o={coords:{latitude:e[0].y,longitude:e[0].x},roadAddress:a};t(o)}}))}}).open()}},null!==s?s:"\ub0b4 \uc704\uce58"),o.a.createElement("div",{className:"gps_button",onClick:function(){return a()}},o.a.createElement("img",{className:"gps_image",src:"https://k.kakaocdn.net/dn/bkl7up/btqC48UZVoy/iu1sMcCNmjuYAlZ4zW8qHK/img.png",alt:""}))),o.a.createElement("div",{className:"user-button-box"},o.a.createElement(u.b,{className:"btn btn-sm btn-primary toggle-button",to:"/list"},"\ubaa9\ub85d\ubcf4\uae30"),o.a.createElement(u.b,{className:"btn btn-sm btn-danger toggle-button",to:"/map"},"\uc9c0\ub3c4\ubcf4\uae30"),o.a.createElement(k.a,{className:"user-button btn-sm filter",onClick:b},"\ud544\ud130\xa0",o.a.createElement("svg",{className:"bi bi-filter",width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{fillRule:"evenodd",d:"M2 10.5a.5.5 0 01.5-.5h3a.5.5 0 010 1h-3a.5.5 0 01-.5-.5zm0-3a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5zm0-3a.5.5 0 01.5-.5h11a.5.5 0 010 1h-11a.5.5 0 01-.5-.5z",clipRule:"evenodd"}))))),o.a.createElement(g.a,{className:"user-modal",returnFocusAfterClose:!1,isOpen:m,fade:!1},o.a.createElement(v.a,null,"\ub0b4 \uc8fc\ubcc0 \ub9c8\uc2a4\ud06c\ub294 \uc5b4\ub514\uc5d0?"),o.a.createElement(f.a,null,o.a.createElement("div",null,o.a.createElement("div",{className:"user-distance"},"\uac80\uc0c9 \ubc18\uacbd"),o.a.createElement("div",{className:"user-distance-select-div"},o.a.createElement("select",{id:"user-distance-select",className:"btn btn-outline-secondary btn-lg user-distance-select",value:_,onChange:function(e){var a=e.target.value;w(a*=1)}},o.a.createElement("option",{className:"",value:"1000"},"1km"),o.a.createElement("option",{className:"",value:"2000"},"2km"),o.a.createElement("option",{className:"",value:"5000"},"5km"))))),o.a.createElement(h.a,null,o.a.createElement(k.a,{color:"primary",onClick:function(){b(),r(_)}},"\uc644\ub8cc"))))},b=(t(51),t(66)),y=t(67),L=function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){return Object(r.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props,a=e.geo,t=e.item,n=e.getDistanceFromLatLonInKm,s=e.handleClick,c=t.name,r=t.addr,i=t.remain_stat,l=t.stock_at,m=t.lat,d=t.lng;return o.a.createElement("div",{className:"card-item ".concat(i)},o.a.createElement(b.a,{className:"innerbody ".concat(i),onClick:function(){return s(t)}},o.a.createElement("div",{className:"mask_name_distance"},o.a.createElement(y.a,{className:"mask_name ".concat(i)},c),o.a.createElement(y.a,{className:"distance"},n(a[0],a[1],m,d)," km")),o.a.createElement(y.a,{className:"mask_addr ".concat(i)},r),o.a.createElement(y.a,{className:"mask_remain ".concat(i)},o.a.createElement("div",{className:"mask_remain_color ".concat(i)}),o.a.createElement("div",{className:"mask_remain_text"},"\uc7ac\uace0 :","plenty"===i?" 100\uac1c \uc774\uc0c1":"some"===i?" 30\uac1c \uc774\uc0c1 100\uac1c\ubbf8\ub9cc":"few"===i?" 2\uac1c \uc774\uc0c1 30\uac1c \ubbf8\ub9cc":"empty"===i?" 1\uac1c \uc774\ud558":" \ud310\ub9e4\uc911\uc9c0")),o.a.createElement(y.a,{className:"mask_stock ".concat(null===l?"none_stock":"ok_stock"," ").concat(i)},"\uc785\uace0\uc2dc\uac04 : ",null===l?"\uc785\uace0\uc815\ubcf4\uc5c6\uc74c":l)))}}]),t}(o.a.Component),_=(t(52),function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){return Object(r.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props,a=e.geo,t=e.items,n=e.getDistanceFromLatLonInKm,s=e.handleClick,c=t.map((function(e){return o.a.createElement(L,{geo:a,item:e,key:e.code,getDistanceFromLatLonInKm:n,handleClick:s})}));return o.a.createElement("div",{className:"item-list"},c)}}]),t}(o.a.Component)),w=(t(53),t(54),function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){return Object(r.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,a=e.lat,t=e.lng,n=e.name,o=document.getElementById("map"),s={center:new kakao.maps.LatLng(a,t),level:4},c=new kakao.maps.Map(o,s),r=new kakao.maps.LatLng(a,t),i=new kakao.maps.Size(40,44),l=new kakao.maps.MarkerImage("https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png",i,null),m=new kakao.maps.Marker({position:r,image:l});m.setMap(c);var d=document.createElement("div");d.className="customoverlay";var u="";u+='<a href="https://map.kakao.com/link/map/'+(n+","+a+","+t)+'" target="_blank">',u+='<span class="title">'+n+"</span>",u+="</a>",d.innerHTML=u;var p=m.getPosition();new kakao.maps.CustomOverlay({map:c,position:p,content:d,yAnchor:.3})}},{key:"render",value:function(){var e=this.props,a=e.geo,t=e.name,n=e.addr,s=e.remain_stat,c=e.stock_at,r=e.lat,i=e.lng,l=e.getDistanceFromLatLonInKm;return o.a.createElement("div",{className:"card-item"},o.a.createElement(b.a,{className:"innerbody selected-item"},o.a.createElement(y.a,{className:"mask_name"},t),o.a.createElement(y.a,{className:"distance selected-item"},l(a[0],a[1],r,i)," km"),o.a.createElement(y.a,{className:"mask_addr "},n),o.a.createElement(y.a,{className:"mask_remain"},o.a.createElement("div",{className:"mask_remain_color"}),o.a.createElement("div",{className:"mask_remain_text"},"\uc7ac\uace0 :","plenty"===s?" 100\uac1c \uc774\uc0c1":"some"===s?" 30\uac1c \uc774\uc0c1 100\uac1c\ubbf8\ub9cc":"few"===s?" 2\uac1c \uc774\uc0c1 30\uac1c \ubbf8\ub9cc":"empty"===s?" 1\uac1c \uc774\ud558":" \ud310\ub9e4\uc911\uc9c0")),o.a.createElement(y.a,{className:"mask_stock"},"\uc785\uace0\uc2dc\uac04 : ",null===c?"\uc785\uace0\uc815\ubcf4\uc5c6\uc74c":c)),o.a.createElement(b.a,{id:"map",className:"kakao_map"}))}}]),t}(o.a.Component)),N=function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){return Object(r.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props,a=e.geo,t=e.selectedItem,n=e.getDistanceFromLatLonInKm,s=e.handleRemove;return o.a.createElement("div",null,o.a.createElement("div",{className:"item-detail-overlay show",onClick:s}),o.a.createElement("div",{className:"item-detail show"},o.a.createElement(w,{geo:a,name:t.name,addr:t.addr,remain_stat:t.remain_stat,stock_at:t.stock_at,lat:t.lat,lng:t.lng,id:t.code,key:t.code,getDistanceFromLatLonInKm:n})))}}]),t}(o.a.Component),I=(t(55),function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=a.call.apply(a,[this].concat(o))).acceptLocationCheck=function(a){var t=e.props.getAcceptLocationInformation;if(!window.confirm("\uc704\uce58\uc815\ubcf4\ud655\uc778\uc5d0 \ub3d9\uc758\ud558\uc2ed\ub2c8\uae4c?"))return a.preventDefault(),void t(!1);t(!0)},e}return Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"select-condition-box"},o.a.createElement("div",{className:"select-codition-content"},o.a.createElement("div",{className:"select-codition-text"},"\ub0b4 \uc8fc\ubcc0 \ub9c8\uc2a4\ud06c\ub294 \uc5b4\ub514\uc5d0?"),o.a.createElement("div",{className:"select-condition-button"},o.a.createElement(u.b,{id:"select-button",className:"select-button",onClick:this.acceptLocationCheck,to:"/list"},"\uc704\uce58\uc815\ubcf4\ub3d9\uc758"))))}}]),t}(o.a.Component)),j=(t(56),t(57),t(58),function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=a.call.apply(a,[this].concat(o))).getKaKaoMapMarker=function(){var a=null,t=null,n=e.props,o=n.geo,s=n.items,c=n.getDistanceFromLatLonInKm,r=o[0],i=o[1],l=document.getElementById("mapList"),m={center:new kakao.maps.LatLng(r,i),level:4},d=new kakao.maps.Map(l,m),u=new kakao.maps.Size(32,34),p={offset:new kakao.maps.Point(27,69)},k=new kakao.maps.MarkerImage("https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png",u,p),g=new kakao.maps.LatLng(r,i);new kakao.maps.Marker({map:d,position:g,image:k});for(var v=s,f=new kakao.maps.Size(32,34),h=new kakao.maps.MarkerImage("https://t1.daumcdn.net/mapjsapi/images/2x/marker.png",f,null),E=function(e){var n=new kakao.maps.LatLng(e.lat,e.lng),s=new kakao.maps.Marker({map:d,position:n,image:h}),r=new kakao.maps.CustomOverlay({yAnchor:.7,zIndex:3,map:d,position:n}),i=e.name+","+e.lat+","+e.lng,l="";l+='<div class="customoverlay size300">',l+='<a class="kakao-map-open" href="https://map.kakao.com/link/map/'+i+'" target="_blank">',l+="",l+="</a>",l+='<div id="size85per" class="card-item '+e.remain_stat+' size85per">',l+='<div class="overlay-innerbody '+e.remain_stat+' card left-only-round">',l+='<div class="overlay-mask-name-distance">',l+='<div class="overlay-mask-name '+e.remain_stat+' card-title">',l+=e.name,l+="</div>",l+='<div class="overlay-distance card-title">',l+=c(o[0],o[1],e.lat,e.lng)+" km",l+="</div>",l+="</div>",l+='<div class="overlay-mask-addr '+e.remain_stat+' card-title">',l+=e.addr,l+="</div>",l+='<div class="overlay-mask-remain '+e.remain_stat+' card-title">',l+='<div class="overlay-mask-remain-color '+e.remain_stat+'"></div>',l+='<div class="overlay-mask-remain-text">',l+="\uc7ac\uace0 : "+("plenty"===e.remain_stat?" 100\uac1c \uc774\uc0c1":"some"===e.remain_stat?" 30\uac1c \uc774\uc0c1 100\uac1c\ubbf8\ub9cc":"few"===e.remain_stat?" 2\uac1c \uc774\uc0c1 30\uac1c \ubbf8\ub9cc":"empty"===e.remain_stat?" 1\uac1c \uc774\ud558":" \ud310\ub9e4\uc911\uc9c0"),l+="</div>",l+="</div>",l+='<div class="overlay-mask-stock '+e.remain_stat+" card-title "+(null===e.stock_at?"none_stock":"ok_stock")+'">',l+="\uc785\uace0\uc2dc\uac04 : "+(null===e.stock_at?"\uc785\uace0\uc815\ubcf4\uc5c6\uc74c":e.stock_at),l+="</div>",l+="</div>",l+="</div>",l+="</div>",kakao.maps.event.addListener(s,"click",(function(){a&&a===s||(a&&t.setMap(null),r.setContent(l),r.setMap(d)),t=r,a=s,document.getElementById("size85per").onclick=function(){t.setMap(null),t=null,a=null}}))},b=0;b<v.length;b++)E(v[b])},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getKaKaoMapMarker()}},{key:"render",value:function(){return o.a.createElement("div",{className:"item-map-list"},o.a.createElement("div",{id:"mapList"}))}}]),t}(o.a.Component)),O=t(13),M=function(e){Object(m.a)(t,e);var a=Object(l.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).getAcceptLocationInformation=function(e){!0===e&&n.setState({acceptLocationInformation:e},(function(e){n.getGeolocation()}))},n.getAddressToGeolocation=function(e){null!==e&&(n.setState({address:e.roadAddress}),n.handleSuccess(e))},n.getDistanceToUser=function(e){if(n.state.distance!==e){var a=1*e;n.setState({distance:a},(function(e){console.log(n.state.distance),n.handleSuccess(null)}))}},n.getGeolocation=function(){navigator.geolocation?(n.setState({address:null}),navigator.geolocation.getCurrentPosition(n.handleSuccess,n.handleError)):alert("\ud604\uc7ac\uc704\uce58\ucc3e\uae30\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ube0c\ub77c\uc6b0\uc800 \uc785\ub2c8\ub2e4. \ud639\uc740 \uc124\uc815\uc5d0\uc11c \uc704\uce58\uc815\ubcf4 \uc811\uadfc \uad8c\ud55c\uc744 \ud5c8\uc6a9\ud574\uc8fc\uc138\uc694")},n.handleError=function(e){alert("\ud604\uc7ac\uc704\uce58\ub97c \ubc1b\uc544\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4")},n.handleSuccess=function(e){if(console.log(e),null!==e){var a=[e.coords.latitude,e.coords.longitude];n.setState({geo:a})}var t="https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat="+n.state.geo[0]+"&lng="+n.state.geo[1]+"&m="+n.state.distance;fetch(t).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).then((function(e){return n.setState({items:e.stores})})).catch((function(e){return console.log(e)}))},n.getDistanceFromLatLonInKm=function(e,a,t,o){var s=n.getDegreesToRadians(t-e),c=n.getDegreesToRadians(o-a),r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n.getDegreesToRadians(e))*Math.cos(n.getDegreesToRadians(t))*Math.sin(c/2)*Math.sin(c/2),i=6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)));return i=i.toFixed(2)},n.getDegreesToRadians=function(e){return e*(Math.PI/180)},n.handleClick=function(e){n.setState({selectedItem:e})},n.handleRemove=function(){n.setState({selectedItem:null})},n.state={geo:[],address:[],items:[],distance:1e3,selectStoreType:null,selectedItem:null,selectedItemMap:null,acceptLocationInformation:!0},n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.state.acceptLocationInformation&&this.getGeolocation()}},{key:"render",value:function(){var e=this;return o.a.createElement(u.a,{basename:"/masktest0330"},o.a.createElement(O.c,null,this.state.acceptLocationInformation&&o.a.createElement(O.a,{path:"/list",component:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(E,{geo:e.state.geo,distance:e.state.distance,address:e.state.address,getGeolocation:e.getGeolocation,getAddressToGeolocation:e.getAddressToGeolocation,getDistanceToUser:e.getDistanceToUser}),o.a.createElement(_,{geo:e.state.geo,items:e.state.items,getDistanceFromLatLonInKm:e.getDistanceFromLatLonInKm,handleClick:e.handleClick}),e.state.selectedItem&&o.a.createElement(N,{geo:e.state.geo,selectedItem:e.state.selectedItem,getDistanceFromLatLonInKm:e.getDistanceFromLatLonInKm,handleRemove:e.handleRemove}))}}),this.state.acceptLocationInformation&&o.a.createElement(O.a,{path:"/map",component:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(E,{geo:e.state.geo,distance:e.state.distance,address:e.state.address,getGeolocation:e.getGeolocation,getAddressToGeolocation:e.getAddressToGeolocation,getDistanceToUser:e.getDistanceToUser}),o.a.createElement(j,{geo:e.state.geo,items:e.state.items,getDistanceFromLatLonInKm:e.getDistanceFromLatLonInKm}))}}),o.a.createElement(O.a,{path:"/",component:function(){return o.a.createElement(I,{getAcceptLocationInformation:e.getAcceptLocationInformation})}})))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(59);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.1bb3133b.chunk.js.map